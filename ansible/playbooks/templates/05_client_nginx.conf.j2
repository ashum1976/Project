#Authpriv remote log on servers

#module(load="imfile")

##Templates.
#template (name="LongTagForwardFormat" type="string" string="<%PRI%>%TIMESTAMP:::date-rfc3339% %HOSTNAME% %syslogtag%%$.suffix%%msg:::sp-if-no-1st-sp%%msg%")

#RuleSets.
ruleset (name="sendToLogserver") {
action(type="omfwd" Target="{{ hostvars[srvbam]['ansible_eth1']['ipv4']['address'] }}" Port="35514" template="LongTagForwardFormat")

}

input(type="imfile"
    file="/var/log/nginx/error.log"
    tag="nginx_error"
    reopenOnTruncate="on"
    ruleset="sendToLogserver"
        )
